[gd_scene load_steps=7 format=3 uid="uid://bv8xk8kfvwx0r"]

[ext_resource type="Script" path="res://Scripts/Characters/NPCs/Enemy.cs" id="1_btrw2"]
[ext_resource type="PackedScene" uid="uid://pboc8bctkcgo" path="res://Scenes/Characters/Rig.tscn" id="2_ix6ir"]
[ext_resource type="PackedScene" uid="uid://20cn14n1xljs" path="res://Scenes/Characters/Abilities/AreaAttack.tscn" id="3_0sxht"]
[ext_resource type="PackedScene" uid="uid://bayi3q6g7tfeu" path="res://Components/HealthComponent.tscn" id="3_yjxyd"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_m6vq8"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_6j1og"]

[node name="Enemy" type="CharacterBody3D" node_paths=PackedStringArray("Rig", "CollisionShape", "HealthComponent", "PlayerDetector", "AreaAttack")]
collision_layer = 9
script = ExtResource("1_btrw2")
Rig = NodePath("CollisionShape3D/Rig")
CollisionShape = NodePath("CollisionShape3D")
HealthComponent = NodePath("HealthComponent")
PlayerDetector = NodePath("CollisionShape3D/Rig/PlayerDetector")
AreaAttack = NodePath("CollisionShape3D/Rig/AreaAttack")
Damage = 50

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_m6vq8")

[node name="Rig" parent="CollisionShape3D" node_paths=PackedStringArray("VillagerMeshes") instance=ExtResource("2_ix6ir")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
VillagerMeshes = [NodePath("CharacterRig/GameRig/Skeleton3D/Villager_01"), NodePath("CharacterRig/GameRig/Skeleton3D/Villager_02")]

[node name="Skeleton3D" parent="CollisionShape3D/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(0.0192403, 0.899087, -0.0269397)
bones/1/rotation = Quaternion(-0.0527891, -0.000133712, -0.00308441, 0.998601)
bones/2/position = Vector3(2.24026e-09, 0.144522, -7.84893e-10)
bones/2/rotation = Quaternion(0.0131128, -0.00283713, -0.0191678, 0.999726)
bones/3/position = Vector3(1.44529e-09, 0.194708, -3.42757e-08)
bones/3/rotation = Quaternion(-0.149431, -0.00823602, 0.0519092, 0.987374)
bones/4/position = Vector3(-2.59469e-09, 0.0888915, 8.7228e-09)
bones/4/rotation = Quaternion(0.325999, 0.00278952, -0.0663868, 0.943032)
bones/6/rotation = Quaternion(-0.174662, 0.0160833, 0.0363388, 0.983826)
bones/7/position = Vector3(0.0192403, 0.899087, -0.0269396)
bones/8/position = Vector3(0.0192402, 0.899087, -0.0269397)
bones/9/position = Vector3(0.150384, 0.964954, -0.0124172)
bones/9/rotation = Quaternion(0.975303, -0.00737605, -0.0290748, 0.218825)
bones/10/position = Vector3(-1.00748e-08, 0.265613, -8.23641e-09)
bones/10/rotation = Quaternion(2.49482e-08, -0.00577038, 1.15719e-08, 0.999983)
bones/11/position = Vector3(-2.90451e-08, 0.265613, 4.82993e-09)
bones/11/rotation = Quaternion(0.431197, -0.00523588, 0.0040121, 0.902234)
bones/12/position = Vector3(1.62521e-08, 0.225624, 3.68352e-08)
bones/12/rotation = Quaternion(-4.3324e-09, 0.00431004, 2.8275e-08, 0.999991)
bones/13/position = Vector3(-1.69895e-08, 0.225624, 8.1641e-09)
bones/13/rotation = Quaternion(-0.721784, 0.0288427, -0.0092453, 0.691456)
bones/14/position = Vector3(-1.82153e-08, 0.139878, 4.97419e-09)
bones/15/position = Vector3(-0.111903, 0.964954, -0.0124172)
bones/15/rotation = Quaternion(0.995725, -0.02464, 0.029993, 0.0838208)
bones/16/position = Vector3(-7.33212e-09, 0.264582, -2.59942e-08)
bones/16/rotation = Quaternion(-1.32957e-08, 8.35089e-05, 8.10163e-09, 1)
bones/17/position = Vector3(1.23407e-08, 0.264582, -4.54994e-09)
bones/17/rotation = Quaternion(0.475404, 0.00057442, 0.000979869, 0.879767)
bones/18/position = Vector3(9.54643e-09, 0.224553, -7.50045e-09)
bones/18/rotation = Quaternion(-2.34067e-08, -0.0116314, 1.34757e-08, 0.999932)
bones/19/position = Vector3(-8.88485e-09, 0.224553, -2.1758e-09)
bones/19/rotation = Quaternion(-0.622812, -0.033971, -0.00652098, 0.781606)
bones/20/position = Vector3(-3.42711e-09, 0.139878, -6.71241e-09)
bones/21/position = Vector3(0.0444119, 1.41568, 0.0853664)
bones/21/rotation = Quaternion(-0.453323, -0.276185, -0.396868, 0.74881)
bones/22/position = Vector3(0.207731, 1.46484, 0.0307588)
bones/22/rotation = Quaternion(-0.0127589, -0.136177, 0.976847, -0.164507)
bones/23/position = Vector3(-5.16355e-09, 0.142745, -5.01162e-08)
bones/23/rotation = Quaternion(5.3084e-08, -0.0245324, 1.14518e-07, 0.999699)
bones/24/rotation = Quaternion(0.463346, -0.0294447, -0.0936049, 0.880728)
bones/25/rotation = Quaternion(2.78903e-07, 0.00093107, 8.82449e-08, 1)
bones/26/position = Vector3(2.01609e-08, 0.126358, 4.09449e-09)
bones/26/rotation = Quaternion(0.0194342, 0.000670318, -0.130933, 0.991201)
bones/32/rotation = Quaternion(0.592004, -0.0381349, -0.0906988, 0.799907)
bones/40/rotation = Quaternion(0.652643, -0.00308126, -0.00421075, 0.757647)
bones/44/rotation = Quaternion(0.715385, 0.0353061, 0.0573144, 0.695481)
bones/46/position = Vector3(0.00810184, 1.41371, 0.0843417)
bones/46/rotation = Quaternion(-0.48356, 0.218444, 0.41832, 0.737198)
bones/47/position = Vector3(-0.153798, 1.44522, 0.0128301)
bones/47/rotation = Quaternion(0.0473765, -0.041032, 0.98214, 0.177408)
bones/48/rotation = Quaternion(-3.45821e-08, 0.0735791, -7.09496e-08, 0.997289)
bones/49/position = Vector3(1.43399e-08, 0.143561, 1.20471e-08)
bones/49/rotation = Quaternion(0.452802, 0.0807339, 0.0885337, 0.883524)
bones/50/rotation = Quaternion(-1.53985e-07, -0.00329986, -1.42166e-07, 0.999995)
bones/51/rotation = Quaternion(-0.102896, -0.00306382, -0.0028932, 0.994683)
bones/57/rotation = Quaternion(0.592004, 0.0381346, 0.0906991, 0.799907)
bones/59/rotation = Quaternion(0.138771, -0.704916, 0.15571, 0.677932)
bones/66/rotation = Quaternion(-0.0684178, -0.72411, -0.0332339, 0.685477)
bones/71/position = Vector3(0.151635, 1.34903, 0.0115919)
bones/71/rotation = Quaternion(-0.0244478, 0.566858, 0.823237, -0.0188568)
bones/72/position = Vector3(-0.087781, 1.33604, 0.00483565)
bones/72/rotation = Quaternion(-0.0244476, 0.56685, 0.823242, -0.0188571)

[node name="Knight_02" parent="CollisionShape3D/Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="CollisionShape3D/Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="CollisionShape3D/Rig" index="2"]
transform = Transform3D(-0.982913, -0.183783, 0.0102872, 0.147015, -0.750183, 0.644679, -0.110764, 0.635176, 0.764384, -0.298921, 1.0237, 0.192648)

[node name="LeftHandBone" parent="CollisionShape3D/Rig" index="3"]
transform = Transform3D(-0.982338, -0.160018, -0.0969953, 0.0551812, -0.743039, 0.666969, -0.178798, 0.649836, 0.738745, 0.326836, 1.01405, 0.118974)

[node name="PlayerDetector" type="ShapeCast3D" parent="CollisionShape3D/Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.87779, 0.995113)
shape = SubResource("CapsuleShape3D_6j1og")
collision_mask = 4

[node name="AreaAttack" parent="CollisionShape3D/Rig" instance=ExtResource("3_0sxht")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
collision_mask = 4

[node name="HealthComponent" parent="." node_paths=PackedStringArray("Body") instance=ExtResource("3_yjxyd")]
Body = NodePath("..")

[connection signal="HeavyAttack" from="CollisionShape3D/Rig" to="." method="OnRigHeavyAttack"]

[editable path="CollisionShape3D/Rig"]
[editable path="CollisionShape3D/Rig/CharacterRig"]
